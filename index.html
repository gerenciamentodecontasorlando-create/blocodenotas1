<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1c2d" />
  <title>BTX Flow ‚Ä¢ Sistema TDAH</title>

  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css" />

  <!-- jsPDF -->
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <script defer src="db.js"></script>
  <script defer src="pdf.js"></script>
  <script defer src="app.js"></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">BTX</div>
      <div>
        <div class="appTitle">Flow TDAH</div>
        <div class="appSub" id="appSub">Agora & Pr√≥ximo</div>
      </div>
    </div>

    <div class="topActions">
      <button class="btn ghost" id="btnQuick">+ R√°pido</button>
      <button class="btn ghost" id="btnPDF">PDF</button>
      <button class="btn ghost" id="btnBackup">Backup</button>
      <button class="btn ghost" id="btnHelp">Ajuda</button>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab active" data-view="today">Hoje</button>
    <button class="tab" data-view="people">Pessoas</button>
    <button class="tab" data-view="cash">Dinheiro</button>
    <button class="tab" data-view="docs">Arquivos</button>
  </nav>

  <main class="main">
    <!-- HOJE -->
    <section class="view active" id="view-today">
      <div class="daybar">
        <button class="chip" id="prevDay" title="Dia anterior">‚óÄ</button>
        <div class="dayTitle">
          <div class="big" id="dayLabel">Hoje</div>
          <div class="muted" id="dayDate"></div>
        </div>
        <button class="chip" id="nextDay" title="Pr√≥ximo dia">‚ñ∂</button>
      </div>

      <!-- DIA V√ÅLIDO -->
      <div class="statusBar" id="statusBar" style="display:none;">
        <div class="statusOk" id="statusText">‚úÖ Dia v√°lido. O resto √© b√¥nus.</div>
      </div>

      <!-- MODO FOCO -->
      <div class="row gap wrap" style="margin: 8px 0 12px;">
        <button class="btn small" id="btnFocus">üéØ Foco 25</button>
        <button class="btn small ghost" id="btnUnfocus" style="display:none;">Sair do foco</button>
      </div>

      <div class="hero">
        <div class="heroCol">
          <div class="heroTitle">AGORA</div>
          <div class="heroBox" id="nowBox">
            <div class="muted">Nada definido. Clique em <b>+ R√°pido</b> e escolha uma a√ß√£o.</div>
          </div>
        </div>
        <div class="heroCol">
          <div class="heroTitle">PR√ìXIMO</div>
          <div class="heroBox" id="nextBox">
            <div class="muted">O app sugere o pr√≥ximo passo assim que voc√™ cadastrar 1‚Äì2 itens.</div>
          </div>
        </div>
      </div>

      <div class="grid3">
        <section class="card borderRed">
          <div class="cardHead">
            <div>
              <div class="cardTitle">N√ÉO POSSO FALHAR</div>
              <div class="muted">prazos, contas, compromisso com algu√©m</div>
            </div>
            <button class="btn small red" data-add="must">+ adicionar</button>
          </div>
          <div class="list" id="list-must"></div>
        </section>

        <section class="card borderGreen">
          <div class="cardHead">
            <div>
              <div class="cardTitle">FUN√á√ÉO PRINCIPAL</div>
              <div class="muted">a a√ß√£o n¬∫ 1 do seu dia ‚Ä¢ o que realmente importa</div>
            </div>
            <!-- Mant√©m data-add="money" por compatibilidade com a l√≥gica -->
            <button class="btn small green" data-add="money">+ adicionar</button>
          </div>
          <div class="list" id="list-money"></div>
        </section>

        <section class="card borderBlue">
          <div class="cardHead">
            <div>
              <div class="cardTitle">SE SOBRAR TEMPO</div>
              <div class="muted">estudo, organiza√ß√£o, pessoal</div>
            </div>
            <button class="btn small" data-add="extra">+ adicionar</button>
          </div>
          <div class="list" id="list-extra"></div>
        </section>
      </div>

      <section class="card">
        <div class="cardHead">
          <div>
            <div class="cardTitle">Compromissos do dia</div>
            <div class="muted">status com 1 toque ‚Ä¢ editar f√°cil</div>
          </div>
          <div class="row gap">
            <button class="btn small" id="btnAddAppt">+ compromisso</button>
            <button class="btn small ghost" id="btnTodayPDF">PDF do dia</button>
          </div>
        </div>
        <div class="list" id="apptList"></div>
      </section>
    </section>

    <!-- PESSOAS -->
    <section class="view" id="view-people">
      <section class="card">
        <div class="cardHead">
          <div>
            <div class="cardTitle">Pessoas</div>
            <div class="muted">mem√≥ria longitudinal: hist√≥rico + dinheiro + arquivos</div>
          </div>
          <button class="btn small" id="btnAddPerson">+ pessoa</button>
        </div>

        <div class="row gap">
          <input class="input" id="peopleSearch" placeholder="Buscar pessoa..." />
          <button class="btn ghost small" id="btnClearPeopleSearch">Limpar</button>
        </div>

        <div class="list" id="peopleList"></div>
      </section>

      <section class="card" id="personPanel" style="display:none;">
        <div class="cardHead">
          <div>
            <div class="cardTitle" id="personName">Pessoa</div>
            <div class="muted" id="personMeta">Linha do tempo</div>
          </div>

          <div class="row gap wrap">
            <button class="btn small" id="btnPersonAddNote">+ nota</button>
            <button class="btn small green" id="btnPersonAddIn">+ entrada</button>
            <button class="btn small red" id="btnPersonAddOut">+ sa√≠da</button>
            <button class="btn small" id="btnPersonAttach">+ arquivo</button>
            <button class="btn ghost small" id="btnPersonPDF">PDF</button>
          </div>
        </div>

        <div class="timeline" id="personTimeline"></div>
      </section>
    </section>

    <!-- DINHEIRO -->
    <section class="view" id="view-cash">
      <section class="card">
        <div class="cardHead">
          <div>
            <div class="cardTitle">Dinheiro</div>
            <div class="muted">entrada/sa√≠da ‚Ä¢ filtro por per√≠odo ‚Ä¢ PDF</div>
          </div>
          <button class="btn ghost small" id="btnCashPDF">PDF do dinheiro</button>
        </div>

        <div class="kpis">
          <div class="kpi">
            <div class="kpiLabel">Saldo</div>
            <div class="kpiValue" id="kpiBalance">R$ 0,00</div>
          </div>
          <div class="kpi">
            <div class="kpiLabel">Entradas (per√≠odo)</div>
            <div class="kpiValue greenTxt" id="kpiIn">R$ 0,00</div>
          </div>
          <div class="kpi">
            <div class="kpiLabel">Sa√≠das (per√≠odo)</div>
            <div class="kpiValue redTxt" id="kpiOut">R$ 0,00</div>
          </div>
        </div>

        <div class="row wrap gap">
          <select class="input" id="cashRange">
            <option value="today">Hoje</option>
            <option value="7">7 dias</option>
            <option value="30">30 dias</option>
            <option value="custom">Per√≠odo</option>
          </select>
          <input class="input" id="cashFrom" type="date" style="display:none;" />
          <input class="input" id="cashTo" type="date" style="display:none;" />
          <button class="btn small" id="btnAddCash">+ lan√ßar</button>
        </div>

        <div class="list" id="cashList"></div>
      </section>
    </section>

    <!-- ARQUIVOS -->
    <section class="view" id="view-docs">
      <section class="card">
        <div class="cardHead">
          <div>
            <div class="cardTitle">Arquivos</div>
            <div class="muted">salvos offline ‚Ä¢ baixar quando quiser</div>
          </div>
          <button class="btn small" id="btnAddDoc">+ arquivo</button>
        </div>

        <div class="row gap">
          <input class="input" id="docsSearch" placeholder="Buscar arquivo..." />
          <button class="btn ghost small" id="btnClearDocsSearch">Limpar</button>
        </div>

        <div class="list" id="docsList"></div>
      </section>
    </section>
  </main>

  <!-- MODAL: +R√°pido -->
  <div class="modal" id="modalQuick" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Adicionar r√°pido</div>
          <div class="muted">sem pensar. escolha e pronto.</div>
        </div>
        <button class="iconBtn" data-close="modalQuick">‚úï</button>
      </div>

      <div class="quickGrid">
        <button class="quickBtn red" data-quick="must">‚ö†Ô∏è N√£o posso falhar</button>
        <button class="quickBtn green" data-quick="money">üéØ Fun√ß√£o principal</button>
        <button class="quickBtn blue" data-quick="extra">üü¶ Se sobrar tempo</button>
        <button class="quickBtn" data-quick="appt">üóìÔ∏è Compromisso</button>
        <button class="quickBtn" data-quick="in">‚ûï Entrada</button>
        <button class="quickBtn" data-quick="out">‚ûñ Sa√≠da</button>
        <button class="quickBtn" data-quick="doc">üìé Arquivo</button>
        <button class="quickBtn" data-quick="person">üë§ Pessoa</button>
      </div>
    </div>
  </div>

  <!-- MODAL: Editor -->
  <div class="modal" id="modalEdit" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle" id="editTitle">Adicionar</div>
          <div class="muted" id="editSubtitle">preencha o m√≠nimo</div>
        </div>
        <button class="iconBtn" data-close="modalEdit">‚úï</button>
      </div>

      <form id="editForm" class="form">
        <div class="row gap wrap">
          <label class="field">
            <span>Texto</span>
            <input class="input" id="fText" placeholder="Ex.: Resolver X (5 min)" />
          </label>
          <label class="field" id="fTimeWrap" style="display:none;">
            <span>Hora</span>
            <input class="input" id="fTime" type="time" />
          </label>
        </div>

        <div class="row gap wrap" id="moneyRow" style="display:none;">
          <label class="field">
            <span>Valor (R$)</span>
            <input class="input" id="fValue" type="number" step="0.01" placeholder="0,00" />
          </label>
          <label class="field">
            <span>Tipo</span>
            <select class="input" id="fCashType">
              <option value="in">Entrada</option>
              <option value="out">Sa√≠da</option>
            </select>
          </label>
          <label class="field">
            <span>Categoria</span>
            <select class="input" id="fCategory">
              <option>Servi√ßo/Trabalho</option>
              <option>Vendas</option>
              <option>Contas</option>
              <option>Transporte</option>
              <option>Compras</option>
              <option>Imposto</option>
              <option>Outros</option>
            </select>
          </label>
        </div>

        <div class="row gap wrap">
          <label class="field">
            <span>Pessoa (opcional)</span>
            <select class="input" id="fPerson"></select>
          </label>
          <label class="field">
            <span>Data</span>
            <input class="input" id="fDate" type="date" />
          </label>
        </div>

        <label class="field" id="docWrap" style="display:none;">
          <span>Arquivo</span>
          <input class="input" id="fFile" type="file" />
        </label>

        <div class="row end gap">
          <button type="button" class="btn ghost" id="btnDelete" style="display:none;">Excluir</button>
          <button type="submit" class="btn" id="btnSave">Salvar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL: Backup -->
  <div class="modal" id="modalBackup" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Backup / Restaurar</div>
          <div class="muted">exporta tudo em um arquivo ‚Ä¢ e importa quando quiser</div>
        </div>
        <button class="iconBtn" data-close="modalBackup">‚úï</button>
      </div>

      <div class="row wrap gap">
        <button class="btn" id="btnExport">Exportar backup</button>
        <label class="btn ghost" for="backupFile" style="cursor:pointer;">Importar backup</label>
        <input id="backupFile" type="file" accept="application/json" style="display:none;" />
      </div>

      <div class="muted smallText">
        Dica: salve seu backup na nuvem (Drive/WhatsApp/e-mail) pra trocar de aparelho sem perder nada.
      </div>
    </div>
  </div>

  <!-- MODAL: Ajuda -->
  <div class="modal" id="modalHelp" aria-hidden="true">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <div class="modalTitle">Como usar (autoexplicativo)</div>
          <div class="muted">3 passos que funcionam pra TDAH</div>
        </div>
        <button class="iconBtn" data-close="modalHelp">‚úï</button>
      </div>

      <ol class="help">
        <li><b>Todo dia, s√≥ 2 coisas:</b> 1 item em ‚ÄúN√£o posso falhar‚Äù e 1 item em ‚ÄúFun√ß√£o principal‚Äù.</li>
        <li><b>Use o + R√°pido</b> pra adicionar sem pensar. O app define AGORA e PR√ìXIMO automaticamente.</li>
        <li><b>PDF</b> quando precisar imprimir, enviar ou guardar.</li>
      </ol>

      <div class="row end">
        <button class="btn" data-close="modalHelp">Entendi</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="muted smallText">Offline-first ‚Ä¢ autosave ‚Ä¢ PDFs com borda ‚Ä¢ BTX</div>
  </footer>
</body>
</html>
